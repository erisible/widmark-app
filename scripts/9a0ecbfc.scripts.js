!function(){"use strict";angular.module("widmarkApp",["ngCookies","pascalprecht.translate"]).config(["$translateProvider",function(a){var b=(window.navigator.userLanguage||window.navigator.language).substr(0,2),c={TITLE:"Widmark app",INTRO:"C'est l'heure du déjeuner et vous avez envie d'un verre. Mais vous avez une réunion dans quelques heures. Combien de verres pouvez-vous boire et être sobre à temps.",GENDER_Q:"Sélectionnez votre sexe",MALE:"homme",FEMALE:"femme",MASS_Q:"Indiquez votre masse",MASS_Q_DETAIL:"(en kilogramme)",MASS_UNIT:"kg",HOUR_Q:"Indiquez l'heure à laquelle vous souhaitez être sobre",RESULT:"Vous pouvez consommez jusqu'à",RESULT_UNIT:"unités d'alcool",BUTTON_LANG_FR:"français",BUTTON_LANG_EN:"anglais",AVERAGE_MALE_WEIGHT:"77",AVERAGE_FEMALE_WEIGHT:"64"},d={TITLE:"Widmark app",INTRO:"It is lunchtime, and you fancy a drink. But you have a meeting in few hours. How many drinks can you have at lunchtime and sober up in time.",GENDER_Q:"Select your sex",MALE:"man",FEMALE:"woman",MASS_Q:"Indicate your mass",MASS_Q_DETAIL:"(in kilograms)",MASS_UNIT:"kg",HOUR_Q:"Select time you want to get sober",RESULT:"You can have up to",RESULT_UNIT:"alcohol units",BUTTON_LANG_FR:"french",BUTTON_LANG_EN:"english",AVERAGE_MALE_WEIGHT:"88",AVERAGE_FEMALE_WEIGHT:"75"};a.translations("fr",c),a.translations("en",d),a.preferredLanguage(b),a.fallbackLanguage("en"),a.useLocalStorage()}])}(),function(){"use strict";angular.module("widmarkApp").controller("MainCtrl",["$translate","$scope","numberFilter",function(a,b,c){function d(a){clearInterval(e),e=setInterval(function(){c(a,1)===c(b.maximumUnits,1)?clearInterval(e):b.$apply(b.maximumUnits=b.maximumUnits>a?Math.abs(b.maximumUnits-.1):b.maximumUnits+.1)},10)}var e,f=new Date((new Date).setHours((new Date).getHours()+4)),g=function(){var a=new Date,c=b.time.hours-a.getHours()+(b.time.minutes-a.getMinutes())/60;return 0>c&&(c+=24),c};b.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.user={weight:20},b.maximumUnits=0,b.time={hours:f.getHours(),minutes:f.getMinutes()},b.setUserWeight=function(c){b.user.weight=a(c)},b.calculateUnits=function(){return 1.03*(.017*g()+.05)*b.user.composition*b.user.weight||0},b.$watch(b.calculateUnits,d),b.changeLanguage=function(b){a.uses(b)}}])}(),function(){"use strict";angular.module("widmarkApp").directive("wmInputNumber",function(){return{restrict:"E",replace:!0,require:"?^ngModel",transclude:!0,templateUrl:"templates/wminputnumber.html",scope:{model:"=ngModel"},link:function(a,b,c,d){function e(){return parseInt(a.model,10)}function f(a){return angular.isDefined(c[a])?parseInt(c[a],10):void 0}function g(a){if(angular.isDefined(c.wmLength)&&c.wmLength>a.toString().length){var b,d=c.wmLength-a.toString().length,e="";for(b=0;d>b;b+=1)e+="0";return e+a}return angular.isDefined(c.wmLength)&&c.wmLength<a.toString().length?a.toString().slice(0,a.toString().length-1):a}a.model=g(a.model),a.incrementValue=function(){e()<f("wmMax")||!angular.isDefined(c.wmMax)?a.model=g(e()+1):angular.isDefined(c.wmMin)&&(a.model=g(f("wmMin")))},a.decrementValue=function(){e()>f("wmMin")||!angular.isDefined(c.wmMin)?a.model=g(e()-1):angular.isDefined(c.wmMax)&&(a.model=g(f("wmMax")))};var h=b.find("input"),i=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta||-a.deltaY;return a.detail||b>0},j=6,k={StartX:0,StartY:0,prevX:0,prevY:0};h.bind("mousewheel wheel",function(b){a.$apply(i(b)?a.incrementValue():a.decrementValue()),b.preventDefault()}),h.bind("touchmove",function(b){b.touches.length&&Math.abs(b.touches[0].clientY-k.StartY)>=j&&(0!==k.prevY&&a.$apply(b.touches[0].clientY<k.prevY?a.incrementValue():a.decrementValue()),k.prevY=b.touches[0].clientY,b.preventDefault())}),h.bind("touchstart",function(a){a.touches.length&&(k.StartX=a.touches[0].clientX,k.StartY=a.touches[0].clientY)}),h.bind("touchend",function(){k.prevX=0,k.prevY=0}),a.updateValue=function(){a.model=g(e())},a.isValid=function(){var a=!0;return angular.isDefined(c.wmMin)&&(a=e()>=f("wmMin")),angular.isDefined(c.wmMax)&&a&&(a=e()<=f("wmMax")),a},d.$render=function(){isNaN(d.$viewValue)?d.$setViewValue(a.model):(d.$setViewValue(d.$viewValue),a.model=g(d.$viewValue)),d.$setValidity("model",a.isValid())}}}})}(),function(){"use strict";angular.module("widmarkApp").directive("wmInputTime",function(){return{restrict:"E",require:"?^ngModel",replace:!0,scope:{model:"=ngModel"},templateUrl:"templates/wminputtime.html"}})}();